---
id: go-setup
title: Go SDK
sidebar_label: Go
---

import SupportEmail from '../website/src/pages/supportemail.js'

This page dives into the nitty-gritty details on installing Rookout under various configurations. If you encounter difficulties with deploying Rookout, this is the place to look.

## Setup

Rookout's Go SDK is served from a [public repository](github.com/Rookout/GoSDK) on Github. 

### Get the package

Run the following inside your app’s directory to add the Rookout SDK to the `go.mod` file - 

```bash

go get -d github.com/Rookout/GoSDK

```

This command will fetch the Rookout SDK from our repository onto your machine, and will also add the Rookout SDK as a dependency to your project (adding it to the `go.mod` file). You should only run this command one time.

:::note 

The `-d` flag ensures that the package will be downloaded and added to `go.mod`, but not installed.

:::

### Start Rookout within your application

Go to the file containing your `main` package and import Rookout:

```go

import (
    rookout "github.com/Rookout/GoSDK"
)

```

Then, in your `main` function, as early as possible, call `rookout.Start`:

```go 

err := rookout.Start(rookout.RookOptions{token=[your-rookout-token]})
fmt.Println(err)

```

For a list of optional arguments to pass to the `Start` function, see the [SDK configuration section](#start). 

### Build the application

#### Enable CGO

Make sure that CGO isn’t disabled. It is enabled by default but may be changed using the `CGO_ENABLED` variable. Make sure it is not disabled in your environment variables as well as the Go tool environment. 

```bash

echo ${CGO_ENABLED} && go env | grep CGO_ENABLED

```

#### Additional Dependencies

If you are using the following environments, you will need to install additional dependencies:

##### Debian OS 

```bash 

apt update && apt install -y libffi-dev zlib1g-dev libedit-dev libc++-11-dev libc++abi-11-dev

```

Note: If needed, add `sudo` for both commands.

##### Alpine distribution 
```bash 

apk add —-no-cache gcc musl-dev zlib-static build-base

```

Note: If needed, add `sudo`.

##### Photon OS 

```bash

tdnf install -y git gcc glibc-devel binutils  zlib-devel openssl-devel linux-api-headers

```

Note: If needed, add `sudo`.

#### Alpine - Specify the OS distribution as a tag

Most OS distributions are automatically recognized. However, if you are using the Alpine distribution, you must specify this in the `go build` command by adding the tag `alpine` to the `-tags` parameter.

#### ldflags

Rookout may not work with the ld flags `-s` and `-w`. These are often passed in the `go build` command using `-ldflags`; we recommend remoing them.

#### gcflags 

We recommend using the following gcflags for your go build: 

```bash

-gcflags="all=-dwarflocationlists=true"

```

This configuration minimizes Rookout’s CPU usage within our clients' application, while providing nearly complete coverage of the project and its dependencies. 

A user can decide to replace `all` with `./...`. This will apply the gcflags chosen exclusively to the project code. `all` can also be replaced with the name of a specific package or regex to choose specific modules to cover.

Note: to attain complete code coverage at the cost of user resource consumption, the following gcflags can be configured: 

```bash

-gcflags 'all=-N -l'

```

:::note 

Cross-compiling may not work out-of-the-box for you. In this case please contact us for assistance at <SupportEmail /> 

:::

## SDK Configuration 

### Start

```go 

Start(labels)
```
The `Start` method is used to initialize the SDK and it accepts the following variables:

| Environment Variable                        | Default Value | Description                                                                                                            |
| ------------------------------------------- | ------------- | ---------------------------------------------------------------------------------------------------------------------- |
| `ROOKOUT_TOKEN`                             | None          | The Rookout token for your organization. Should be left empty if you are using a Rookout ETL Controller                |
| `ROOKOUT_LABELS`                            | {}            | A dictionary of key:value labels for your application instances. Use `k:v,k:v` format for environment variables        |
| `ROOKOUT_COMMIT`                            | None          | String that indicates your git commit or a branch name                                                                 |
| `ROOKOUT_REMOTE_ORIGIN`                     | None          | String that indicates your git remote origin                                                                           |
| `ROOKOUT_CONTROLLER_HOST`                   | None          | If you are using a Rookout ETL Controller, this is the hostname for it                                                 |
| `ROOKOUT_CONTROLLER_PORT`                   | None          | If you are using a Rookout ETL Controller, this is the port for it                                                     |
| `ROOKOUT_PROXY`                             | None          | URL to proxy server                                                                                                    |
| `ROOKOUT_DEBUG`                             | False         | Set to `True` to increase log level to debug                                                                           |
| `ROOKOUT_SOURCES`                           | None          | Source information (see below)                                                                                         |
| `ROOKOUT_LIVE_LOGGER`                       | False         | Set to `True` to enable Rookout Live Logger                                                                            |
| `ROOKOUT_QUIET`                             | False         | Set to `True` to stop informative log messages from being written to the standard output and error                     |

## Supported Versions 

The following Go versions are supported: 1.15 - 1.19

If your version is not mentioned above, please let us know at <SupportEmail /> 

## Supported Operating Systems 

The Go SDK supports Mac and Linux OSs. 